"use strict";const inpSearchEl=document.querySelector("#inpSearch"),btnSearchEl=document.querySelector(".btnSearch"),listUlEl=document.querySelector(".listUl"),listUlFavEl=document.querySelector(".listUlFav");let arrFav=localStorage.getItem("arrFav")?JSON.parse(localStorage.getItem("arrFav")):[];function handleSearch(){const e=[];fetch(`http://api.tvmaze.com/search/shows?q=${inpSearchEl.value}`).then(e=>e.json()).then(r=>{let a="";for(let t=0;t<r.length;t++){const l=r[t].show.name;let n;n=null===r[t].show.image?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":r[t].show.image.medium,e.push({name:l,image:n}),a+=`<li>${l}<img src="${n}" /> </li>`,listUlEl.innerHTML=a}document.querySelectorAll(".listUl li").forEach(e=>e.addEventListener("click",changeBgc))})}function changeBgc(e){const r=e.currentTarget.textContent,a=e.currentTarget.querySelector("img").src;listUlFavEl.innerHTML="",e.currentTarget.classList.toggle("inv-colors"),e.currentTarget.classList.contains("inv-colors")?arrFav.length>0?void 0===arrFav.find(e=>e.name===r&&e.image===a)&&arrFav.push({name:r,image:a}):arrFav.push({name:r,image:a}):arrFav=arrFav.filter(e=>e.name!==r&&e.image!==a),drawFav(),localStorage.setItem("arrFav",JSON.stringify(arrFav))}function drawFav(){const e=document.querySelector(".subtitle");if(listUlFavEl.innerHTML="",arrFav.length>0){for(let e=0;e<arrFav.length;e++){const r=`<li>${arrFav[e].name}<img src="${arrFav[e].image}" /><a class="delete" href="#">borrar x</a></li>`;listUlFavEl.innerHTML=listUlFavEl.innerHTML+r}document.querySelectorAll(".delete").forEach(e=>e.addEventListener("click",deleteFav)),e.innerHTML="Mis series favoritas"}else e.innerHTML=""}function deleteFav(e){const r=e.target.parentElement.textContent,a=e.target.parentElement.querySelector("img").src;arrFav=arrFav.filter(e=>e.name!==r&&e.image!==a),drawFav(),localStorage.setItem("arrFav",JSON.stringify(arrFav))}btnSearchEl.addEventListener("click",handleSearch),drawFav();