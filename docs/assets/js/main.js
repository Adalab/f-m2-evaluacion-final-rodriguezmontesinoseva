"use strict";const inpSearchEl=document.querySelector("#inpSearch"),btnSearchEl=document.querySelector(".btnSearch"),listUlEl=document.querySelector(".listUl"),listUlFavEl=document.querySelector(".listUlFav");let arrFav=localStorage.getItem("arrFav")?JSON.parse(localStorage.getItem("arrFav")):[];function handleSearch(){const e=[];fetch(`http://api.tvmaze.com/search/shows?q=${inpSearchEl.value}`).then(e=>e.json()).then(a=>{let r="";for(let t=0;t<a.length;t++){const l=a[t].show.name;let n;n=null===a[t].show.image?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":a[t].show.image.medium,e.push({name:l,image:n}),r+=`<li>${l}<img src="${n}" /> </li>`,listUlEl.innerHTML=r}document.querySelectorAll(".listUl li").forEach(e=>e.addEventListener("click",addFav))})}function addFav(e){const a=e.currentTarget.textContent,r=e.currentTarget.querySelector("img").src;listUlFavEl.innerHTML="",e.currentTarget.classList.toggle("inv-colors"),e.currentTarget.classList.contains("inv-colors")?arrFav.length>0?void 0===arrFav.find(e=>e.name===a&&e.image===r)&&arrFav.push({name:a,image:r}):arrFav.push({name:a,image:r}):arrFav=arrFav.filter(e=>e.name!==a&&e.image!==r),drawFav(),localStorage.setItem("arrFav",JSON.stringify(arrFav))}function drawFav(){const e=document.querySelector(".subtitle");if(listUlFavEl.innerHTML="",arrFav.length>0){for(let e=0;e<arrFav.length;e++){const a=`<li>${arrFav[e].name}<img src="${arrFav[e].image}" /><a class="delete" href="#">Borrar</a></li>`;listUlFavEl.innerHTML=listUlFavEl.innerHTML+a}document.querySelectorAll(".delete").forEach(e=>e.addEventListener("click",deleteFav)),e.innerHTML="Mis series favoritas"}else e.innerHTML=""}function deleteFav(e){const a=e.target.parentElement.textContent,r=e.target.parentElement.querySelector("img").src;arrFav=arrFav.filter(e=>e.name!==a&&e.image!==r),drawFav(),localStorage.setItem("arrFav",JSON.stringify(arrFav))}btnSearchEl.addEventListener("click",handleSearch),drawFav();